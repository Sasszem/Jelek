<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>analyzer: Network solver file format</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">analyzer
   </div>
   <div id="projectbrief">Linear resistive networks analyzer</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Network solver file format </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h1><a class="anchor" id="autotoc_md1"></a>
Header</h1>
<div class="fragment"><div class="line">&lt;network parameters&gt; &lt;analysis mode&gt; [analysis parameters]</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md2"></a>
Network parameters</h2>
<div class="fragment"><div class="line">&lt;N: unsigned&gt; &lt;B: unsigned&gt;</div>
</div><!-- fragment --><p>The header must consist of 2 unsigned integers N and B</p><ul>
<li>N is the number of nodes in the network</li>
<li>B is the number of devices (branches)</li>
</ul>
<h2><a class="anchor" id="autotoc_md3"></a>
Analysis mode</h2>
<div class="fragment"><div class="line">&lt;mode: DC | GEN | TWOPORT | EQ | RES &gt;</div>
</div><!-- fragment --><p>The header must continue with a word specifying the analysis mode.</p>
<p>possible values:</p><ul>
<li>DC - solves for all voltages and currents</li>
<li>GEN - solves for equivalent generator (Thevenin and Norton) parameters</li>
<li>TWOPORT - solves for all possible two-port characteristic matrices</li>
<li>EQ - diagnostic printing of the extended matrix of the equation system</li>
<li>RES - equivalent resistor parameters</li>
</ul>
<p>If omitted, it defaults to DC</p>
<h2><a class="anchor" id="autotoc_md4"></a>
Analysis modes and parameters</h2>
<p>Additional analysis parameters might follow after the mode</p>
<h3><a class="anchor" id="autotoc_md5"></a>
DC</h3>
<p>DC has no parameters, anything after mode will be ignored</p>
<p>Return will be a column vector with every device's voltage and current, sorted by id, so <code>u1, i1, u2, i2, ...</code></p>
<h3><a class="anchor" id="autotoc_md6"></a>
GEN</h3>
<div class="fragment"><div class="line">&lt;DEVICEID: unsigned&gt; [&lt;R1: double&gt; &lt;R2: double&gt;]</div>
</div><!-- fragment --><p>GEN has the following parameters:</p>
<ul>
<li>DEVICEID: unsigned integer id of a device that will be used as "output". It's equation will be replaced, so it can be anything but a resistor is recommended</li>
<li>R1, R2: resistance values to terminate the network with. Default is 1 and 1M</li>
</ul>
<p>Result will be a 3x1 column vector <code>[u, i, r]</code></p>
<h3><a class="anchor" id="autotoc_md7"></a>
TWOPORT</h3>
<div class="fragment"><div class="line">&lt;PRIMARYID: unsined&gt; &lt;SECONDARYID: unsigned&gt;</div>
</div><!-- fragment --><ul>
<li>PRIMARYID: id of the primary port of the two-port network</li>
<li>SECONDARYID: id of the secondary port of the network</li>
</ul>
<p>Both devices will be removed, so setting them as a resistor or wire is recommended</p>
<p>Result will be a 12x2 matrix, where 2x2 blocks are the R, G, H, K, A and B matrices in this order from top to bottom.</p>
<p><b>WARNING:</b> I got some funny results when NOT using device 1 and 2 as the ports, witch I'll look furter into later.</p>
<h3><a class="anchor" id="autotoc_md8"></a>
EQ</h3>
<div class="fragment"><div class="line">[printType: 1 | 2]</div>
</div><!-- fragment --><p>Parameters</p><ul>
<li><code>printType</code>. 1 for human-readable, 2 for matlab-code. Defaults to 1 (human-readable)</li>
</ul>
<p>Result is the extended matrix of the equation system or matlab code declarinig matrix and vector of the equation system</p>
<h3><a class="anchor" id="autotoc_md9"></a>
RES</h3>
<div class="fragment"><div class="line">port: device</div>
</div><!-- fragment --><p>Calculates equivalent resistor value. Does a basic sanity check with 0-current stimulus to check if it's really a resistor.</p>
<ul>
<li>PORT: id of the device identifying the ports</li>
</ul>
<p>The equation of the device specified will be erased! If it was already erased by a nullor, the answer will be wrong!</p>
<p>Result is a 1x1 matrix with the resistance value.</p>
<h1><a class="anchor" id="autotoc_md10"></a>
devices</h1>
<div class="fragment"><div class="line">&lt;TYPE: string&gt; &lt;ID: unsigned&gt; &lt;PLUS: unsigned&gt; &lt;MINUS: unsigned&gt; &lt;...params&gt;</div>
</div><!-- fragment --><p>All devices have a type, an ID, and two connections (plus and minus) to nodes.</p>
<h2><a class="anchor" id="autotoc_md11"></a>
Resistor</h2>
<ul>
<li>type string: <code>RES</code></li>
<li>parameter: resistance (double)</li>
<li>equation: <code>iR - u = 0</code></li>
</ul>
<h2><a class="anchor" id="autotoc_md12"></a>
Voltage source</h2>
<ul>
<li>type string: <code>VOL</code></li>
<li>parameter: voltage (double)</li>
<li>equation: <code>u = uset</code></li>
</ul>
<h2><a class="anchor" id="autotoc_md13"></a>
Current source</h2>
<ul>
<li>type string: <code>CUR</code></li>
<li>parameter: current (double)</li>
<li>equation: <code>i = iset</code></li>
</ul>
<p>Caveat: it's a current SINK, so current will flow from + to -! (it follows the normal directions for voltage and current)</p>
<h2><a class="anchor" id="autotoc_md14"></a>
Short / wire</h2>
<ul>
<li>type string: <code>WIRE</code></li>
<li>no parameters</li>
<li>equation: <code>u = 0</code></li>
<li>useful for current-controlled devices or dummy devices in TWOPORT or RESISTOR analysis</li>
</ul>
<h2><a class="anchor" id="autotoc_md15"></a>
Break / probe</h2>
<ul>
<li>type string: <code>PROBE</code></li>
<li>no parameters</li>
<li>equation: <code>i = 0</code></li>
<li>useful for voltage-controlled devices or as dummy devices</li>
</ul>
<h2><a class="anchor" id="autotoc_md16"></a>
Coupled devices</h2>
<p>These devices should come in pairs, but it's not enforced, so it's the responsibility of the creator of the file to ensure that.</p>
<p>To make clear that a device is a coupled one, all coupled device types start with a dollar sign</p>
<h3><a class="anchor" id="autotoc_md17"></a>
Current controlled current source</h3>
<ul>
<li>type string: <code>$CCCS</code></li>
<li>parameters: source (id), current gain (double a)</li>
<li>equation: <code>a * i(id) - i = 0</code></li>
</ul>
<h3><a class="anchor" id="autotoc_md18"></a>
Current controlled voltage source</h3>
<ul>
<li>type string: <code>$CCVS</code></li>
<li>parameters: source(id), transfer resistance (double r)</li>
<li>equation: <code>r * i(id) - u = 0</code></li>
</ul>
<p>Since there's no gyrator component, two of these can be used instead easily</p>
<h3><a class="anchor" id="autotoc_md19"></a>
Voltage controlled voltage source</h3>
<ul>
<li>type string: <code>$VCVS</code></li>
<li>parameters: source(id), voltage gain (double g)</li>
<li>equation: <code>g * u(id) - u = 0</code></li>
</ul>
<h3><a class="anchor" id="autotoc_md20"></a>
Voltage controlled current source</h3>
<ul>
<li>type string: <code>$VCCS</code></li>
<li>parameters: source(id), transfer conductance (double g)</li>
<li>equation: <code>g * u(id) - i = 0</code></li>
</ul>
<h3><a class="anchor" id="autotoc_md21"></a>
Nullator</h3>
<ul>
<li>type string: <code>$NULL</code></li>
<li>parameters: friend device (id)</li>
<li>equations: <code>u=0, i=0</code></li>
<li><b>FRIEND DEVICE ID MUST BE LOWER THEN ID!</b></li>
<li>since every device can have only one equation, it overrides the equation of it's 'friend' device</li>
<li>this means the other device effectively becomes a norator, and the two devices together form a nullor, or an ideal amplifier</li>
<li>the writer of a file must be careful with the friend devices!</li>
<li>using <code>AMP</code> shorthand is recommended instead</li>
</ul>
<h2><a class="anchor" id="autotoc_md22"></a>
Coupled pair shorthand</h2>
<p>These pseudo-devices are actually two normal devices used to build a common coupled pair. Since they are still two devices, they take the given ID and the next one.</p>
<p>To make clear that a device is a pair shorthand, all type strings start with an exclamation mark.</p>
<div class="fragment"><div class="line">&lt;type: string&gt; &lt;id&gt; &lt;plus1: node&gt; &lt;minus1: node&gt; &lt;plus2: node&gt; &lt;minus2: node&gt; &lt;param: double&gt;</div>
</div><!-- fragment --><p>Don't forget that they still count as 2 devices, taking <code>id</code> and <code>id+1</code>!</p>
<h3><a class="anchor" id="autotoc_md23"></a>
ideal transformer</h3>
<ul>
<li>type string: <code>!TRAN</code></li>
<li>parameter is ratio between first and second device</li>
<li>synthetized with a CCCS and VCVS</li>
</ul>
<h3><a class="anchor" id="autotoc_md24"></a>
gyrator</h3>
<ul>
<li>type string: <code>!GYR</code></li>
<li>parameter is gyration resistance</li>
<li>synthetized with two CCVS-es</li>
</ul>
<h3><a class="anchor" id="autotoc_md25"></a>
Ideal amplifier</h3>
<ul>
<li>type string: <code>!AMP</code></li>
<li>no parameters</li>
<li>synthetized with a nullator and a short (replaced with a norator)</li>
</ul>
<h1><a class="anchor" id="autotoc_md26"></a>
Empty lines, comments or EOF</h1>
<ul>
<li>empty lines are ignored</li>
<li>also every line starting with hashtag (#) is ignored</li>
<li>(due to the way parsing is implemented any extra info written after a line is also ignored IF NO PARAMETERS CAN FOLLOW)</li>
<li>parsing terminates without error when EOF is reached or a line starts with <code>END</code></li>
<li>don't press CTRL-C, because it throws and exception. </li>
</ul>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1
</small></address>
</body>
</html>
